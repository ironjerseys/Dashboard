@using Dashboard.Entities
@model Article
@{
    ViewData["Title"] = "Détails";
    var qs = (IEnumerable<QuizQuestion>) (ViewBag.Questions ?? Enumerable.Empty<QuizQuestion>());
}

<div class="container mt-5 article-page">
    <h1>@Model.Titre</h1>
    <p class="text-muted">Publié le @Model.DateCreation.ToLocalTime()</p>
    @if (Model.Labels?.Any() ?? false)
    {
        <p class="text-muted">Labels:
            @foreach(var l in Model.Labels){<span class="badge bg-secondary me-1">@l.Name</span>}
        </p>
    }

    <div class="mb-5 article-content card">
        @Html.Raw(Model.Contenu)
    </div>

    @if (qs.Any())
    {
        <div class="card p-3 mb-3">
            <h5>Questions liées</h5>
            <ul class="mb-0">
                @foreach (var q in qs)
                {
                    <li>@q.QuestionText</li>
                }
            </ul>
        </div>
    }

    <div class="d-flex gap-2">
        <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-primary">Modifier</a>
        <a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger">Supprimer</a>
        <a asp-action="Index" class="btn btn-secondary">Retour à la liste</a>
        @if(!qs.Any() && ViewBag.CreateQuestionUrl != null){
            <a href="@ViewBag.CreateQuestionUrl" class="btn btn-outline-info">Créer une question liée</a>
        }
        @if(ViewBag.CreateQuestionUrl != null){
            <a href="@ViewBag.CreateQuestionUrl" class="btn btn-outline-info">Ajouter une question liée</a>
        }
    </div>
</div>