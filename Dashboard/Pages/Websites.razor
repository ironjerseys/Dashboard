@page "/websites2"

@using Microsoft.JSInterop
@using Microsoft.AspNetCore.Components.Web
@using global::Dashboard.Models

@rendermode RenderMode.InteractiveServer

@inject IJSRuntime JS


<div class="container">
    @{
        var index = 0;
    }

    @foreach (var website in WebsitesList)
    {
        var isRemoved = string.IsNullOrWhiteSpace(website.Url);

        <div class="card afficher @(isRemoved ? "removed" : "")" data-index="@index">
            <h2>@website.Name</h2>

            <img src="@($"/images/{website.Image}")" alt="@website.Name" />

            <div>@((MarkupString)website.DescriptionHtml)</div>

            @if (!isRemoved)
            {
                <p>
                    Visiter le site web:
                    <a href="@website.Url" target="_blank" rel="noopener noreferrer">@website.Url</a>
                </p>
            }
            else
            {
                <p><em>Ce site n'est plus disponible.</em></p>
            }
        </div>

        index++;
    }
</div>

@code {

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
            await JS.InvokeVoidAsync("cvFadeInit");
    }

    private static readonly List<Website> WebsitesList = new()
    {
        new Website
        {
            Name = "Chess Results Stats",
            DescriptionHtml =
                "<p>J'ai transformé Chess Results Stats Chess Multitool, une application mobile sur Google Play dans un premier temps, avec quelques features supplémentaires.</p>" +
                "<p>J'ai développé l'application avec .NET MAUI.</p>" +
                "<p>Mon but est de développer mes compétences en développement mobile pour savoir créér une app, la déployer sur un store d'applications, et la monétiser.</p>",
            Url = "https://play.google.com/store/apps/details?id=com.companyname.chessmultitool&hl=en",
            Image = "chessmultitool.png"
        },
        new Website
        {
            Name = "Chess Results Stats - Non maintenu",
            DescriptionHtml =
                "<p>Chess Results Stats est un site pour analyser des données fournies par Chess.com, le site d'échec en ligne le plus utilisé dans le monde.</p>" +
                "<p>Il part d'un projet scolaire où je devais manipuler des données avec LinQ, je l'ai donc réalisé en .NET et Angular, j'ai stocké le code sur GitHub et j'ai déployé le site sur Azure avec une pipeline CI/CD GitHub Actions.</p>" +
                "<p>J'ai profité de ce projet pour tester différentes stacks techniques, j'ai refait le projet avec la MERN stack, MongoDB Express React et Node.JS.</p>" +
                "<p>La première version consistait à exporter un fichier de Chess.com et l'uploader sur mon site, pour visualiser quelques résultats clés. Avec la deuxième version j'ai ajouté une base de donnée pour stocker les résultats, remplacé les quelques résultats clés par des graphs avec Chart.JS et remplacé le download/upload de fichier par un appel à l'API Ches.com.</p>" +
                "<p>J'ai ensuite réécris le site en Java / Angular, pour enfin revenir à .NET / Angular, et j'ai remplacé la base de donnée MongoDB par une base de donnée SQL Server hébergée sur Azure.</p>",
            Url = "",
            Image = "chessresultsstats.png"
        },
        new Website
        {
            Name = "Le site a été intégré à Chess Results Stats",
            DescriptionHtml =
                "<p>C'est quoi l'ouverture est un site permettant de visualiser les ouvertures les plus connues et quelques pièges d'ouverture. J'ai développé le site en Python avec Django, un framework que je voulais découvrir depuis longtemps, et une base de données PostgreSQL.</p>" +
                "<p>Le code est sur GitHub et le site est déployé sur Azure avec une pipeline CI/CD GitHub Actions.</p>",
            Url = "",
            Image = "cestquoilouverture.png"
        }
    };
}
